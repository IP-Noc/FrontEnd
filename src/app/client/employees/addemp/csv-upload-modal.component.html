<div class="modal-header">
  <h4 class="modal-title">Upload CSV File</h4>
  <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="modal-body">
  <div class="text-center mb-4">
    <h5>Download the template to fill it</h5>
    <a href="../../../../assets/files/Add employees Excel Sheet - Feuille 1.csv" download>
      <img src="../../../../assets/images/Download.png" alt="Download Template" class="download-image clickable-image" />
    </a>
  </div>
  
  <div class="text-center mb-4">
    <h5>Upload your filled CSV file</h5>
    <label class="custom-file-upload">
      <input type="file" id="csvFile" (change)="onFileSelect($event)" />
      <img src="../../../../assets/images/Upload.png" alt="Upload CSV" class="upload-image clickable-image" />
    </label>
  </div>
  
  <div class="text-center">
    <button class="btn btn-primary mt-3" (click)="addEmployees()" [disabled]="loading">Add</button>
  </div>
  
  <div *ngIf="loading" class="loading-spinner mt-3 text-center">
    <i class="fas fa-spinner fa-spin"></i> Adding employees...
  </div>
  
  <div *ngIf="testing === true" class="alert alert-success mt-3 text-center">
    {{msjerror}}
  </div>
  <div *ngIf="testing === false" class="alert alert-danger mt-3 text-center">
    {{msjerror}}
  </div>
  
  <div class="data-preview mt-4">
    <div *ngFor="let item of (showAll ? jsonData : jsonData.slice(0, 5)); let i = index" class="card mb-2">
      <div class="card-body d-flex justify-content-between align-items-center">
        <div>
          <h5 class="card-title mb-1">
            <i class="fas fa-envelope"></i> {{item.email}}
          </h5>
          <p class="card-text mb-1">
            <i class="fas fa-user"></i> {{item.username}}
          </p>
          <p class="card-text">
            <i class="fas fa-phone"></i> {{item.phone}}
          </p>
        </div>
        <button class="btn btn-danger" (click)="deleteItem(i)">
          <i class="fas fa-trash-alt"></i> Delete
        </button>
      </div>
    </div>
    <div class="text-center">
      <button *ngIf="jsonData.length > 5 && !showAll" class="btn btn-secondary" (click)="showAllData()">See More</button>
    </div>
  </div>
</div>
